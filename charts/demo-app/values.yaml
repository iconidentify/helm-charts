# Demo App Helm Chart Values

# Frontend configuration
frontend:
  replicaCount: 2
  image:
    repository: nginx
    tag: 1.25-alpine
    pullPolicy: IfNotPresent
  resources:
    requests:
      memory: "64Mi"
      cpu: "50m"
    limits:
      memory: "128Mi"
      cpu: "100m"
  service:
    type: NodePort
    port: 80
    nodePort: 30080

# Backend configuration
backend:
  replicaCount: 2
  image:
    repository: hashicorp/http-echo
    tag: 0.2.3
    pullPolicy: IfNotPresent
  args:
    - "-text=Hello from Kubernetes backend!"
  resources:
    requests:
      memory: "32Mi"
      cpu: "25m"
    limits:
      memory: "64Mi"
      cpu: "50m"
  service:
    type: NodePort
    port: 5678
    nodePort: 30081

# Redis configuration
redis:
  replicaCount: 1
  image:
    repository: redis
    tag: 7-alpine
    pullPolicy: IfNotPresent
  resources:
    requests:
      memory: "64Mi"
      cpu: "50m"
    limits:
      memory: "128Mi"
      cpu: "100m"
  service:
    type: ClusterIP
    port: 6379

# Frontend HTML content
config:
  indexHtml: |
    <!DOCTYPE html>
    <html>
    <head><title>Kubernetes Home Lab</title>
    <style>
      body { font-family: Arial, sans-serif; max-width: 800px; margin: 50px auto; padding: 20px; }
      h1 { color: #326CE5; }
      .info { background: #f5f5f5; padding: 15px; border-radius: 8px; margin: 10px 0; }
      .success { color: #28a745; }
    </style>
    </head>
    <body>
      <h1>Welcome to the Kubernetes Home Lab!</h1>
      <div class="info">
        <p><strong>Host:</strong> nuc (10.1.1.3)</p>
        <p><strong>Stack:</strong> kubeadm + Calico + Crossplane</p>
      </div>
      <div class="info">
        <p><strong>Backend Response:</strong> <span id="backend" class="success">Loading...</span></p>
      </div>
      <script>
        fetch('http://' + window.location.hostname + ':30081/')
          .then(r => r.text())
          .then(t => document.getElementById('backend').innerText = t)
          .catch(e => document.getElementById('backend').innerText = 'Backend not reachable from browser');
      </script>
    </body>
    </html>
