# Mac Connect Helm Chart Values

# Relay component
relay:
  replicaCount: 1
  image:
    repository: ghcr.io/iconidentify/68k_web-relay
    tag: latest
    pullPolicy: Always
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "512Mi"
      cpu: "500m"
  env:
    relayBind: ":8081"
    allowIPs: "10.0.0.0/8,192.168.0.0/16"
    allowPorts: "5191,548"
    blockPrivate: "false"
    diskPath: "/disks"
  service:
    type: ClusterIP
    port: 8081

# Web component
web:
  replicaCount: 1
  image:
    repository: ghcr.io/iconidentify/68k_web-web
    tag: latest
    pullPolicy: Always
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "512Mi"
      cpu: "500m"
  service:
    type: ClusterIP
    port: 80
  probes:
    readiness:
      httpGet:
        path: /
        port: 80
      initialDelaySeconds: 5
      periodSeconds: 10
    liveness:
      httpGet:
        path: /
        port: 80
      initialDelaySeconds: 10
      periodSeconds: 30

imagePullSecrets:
  - name: ghcr-secret

# Persistence configuration
persistence:
  enabled: true
  # storageClass: ""  # Use default storage class
  disk:
    size: 2Gi
    accessMode: ReadWriteOnce
  rom:
    size: 100Mi
    accessMode: ReadWriteOnce

# Configuration
config:
  configJson: |
    {
      "defaultBootDisk": "system7.dsk"
    }

# JS patch (disabled - no patch currently exists)
jsPatch:
  enabled: false
  filename: "index-patched.js"
  mountPath: "/usr/share/nginx/html/assets/index-qcmAH0Ad.js"
